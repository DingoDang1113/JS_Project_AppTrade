!function(){let e,t=[],n={},o={},c=0;const l=["#45ffbc","#e3ffa8","#a6a6a6","#f6cd61","#aec993"];async function a(e){const t=`https://financialmodelingprep.com/api/v3/quote/${e}?apikey=9d63fd6e1909cca85846e3cc209`,n=localStorage.getItem(`${e}`);if(n)return JSON.parse(n);try{const n=await fetch(t),o=await n.json();return localStorage.setItem(`${e}`,JSON.stringify(o)),o}catch(e){return console.error(e),null}}document.getElementById("content");const s=document.getElementById("stockTiles");async function r(){e&&e.destroy();let n=t,o=[],c=[];const l=JSON.parse(localStorage.getItem("purchasePrices")),a=JSON.parse(localStorage.getItem("quantities"));for(let e=0;e<n.length;e++){let t=JSON.parse(localStorage.getItem(n[e]));if(t&&t.length>0){let s=(t[0].price-l[n[e]])*a[n[e]];c.push(t[0].symbol),o.push(s)}}const s=document.getElementById("myChart").getContext("2d");e=new Chart(s,{type:"bar",data:{labels:c,datasets:[{label:"Gain/Loss in USD",data:o,backgroundColor:"rgba(180,255,228,1)",borderColor:"rgba(75,192,192,1)",borderWidth:1}]},options:{responsive:!0,scales:{y:{beginAtZero:!0}}},backgroundColor:"black"})}!function(){for(document.getElementById("stockTiles").innerHTML="";s.firstChild;)s.removeChild(s.firstChild);t?.forEach((e=>{!function(e){const d=e[0],i=(document.createElement("span"),document.createElement("div"));i.style.margin="5px",i.style.padding="1px",i.style.borderRadius="8px",i.style.width="150px",i.style.backgroundColor=l[c%l.length],c++;const p=document.createElement("span"),m=function(e){return e>0?`⬆${e.toFixed(2)}%`:`⬇${e.toFixed(2)}%`},u=n[d.symbol],y=o[d.symbol],g=(d.price-u)*y,f=100*(d.price/u-1),h=document.createElement("p");h.id="symbolInfo",h.style.fontWeight="600",h.textContent=`${d.symbol}`;const C=document.createElement("p");C.id="priceInfo",C.style.fontStyle="oblique",C.textContent=`$${d.price.toFixed(2)}`;const b=document.createElement("p");b.id="changeInfo",b.style.fontStyle="oblique",b.textContent=`${m(d.changesPercentage)}`,d.changesPercentage<0&&(C.style.color="red",b.style.color="red");const x=document.createElement("p");x.id="gainLossInfo",x.textContent=`$${g.toFixed(2)}`;const E=document.createElement("p");E.id="roiInfo",E.textContent=`${m(f)}`,f<0&&(x.style.color="red",E.style.color="red");const I=document.createElement("button");I.textContent="-",I.addEventListener("click",(function(){const e=t.indexOf(d.symbol);-1!==e&&(t.splice(e,1),delete n[d.symbol],delete o[d.symbol]),s.removeChild(i),r(),async function(){let e=0,t=0,c=0;for(const l of Object.keys(n)){const s=await a(l);if(s&&s.length>0){const a=s[0].price;e+=(a-n[l])*o[l],t+=o[l]*n[l],c+=o[l]*a}}const l=100*(c/t-1);console.log("totalROI",l);const s=document.getElementById("summaryTile");s.innerHTML="";const r=document.createElement("p");r.id="summaryGL",r.style.fontWeight="800",r.textContent=`Gain/Loss:     $${e.toFixed(2)}`;const d=document.createElement("p");d.id="summaryROI",d.style.marginTop="5px",d.textContent=`${l.toFixed(2)}%`,s.appendChild(r),s.appendChild(d)}()})),i.appendChild(I),i.appendChild(p),i.appendChild(h),i.appendChild(C),i.appendChild(b),i.appendChild(x),i.appendChild(E),s.appendChild(i),d.price}(JSON.parse(localStorage.getItem(e)))})),r()}()}();
//# sourceMappingURL=main.js.map