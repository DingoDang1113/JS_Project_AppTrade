{"version":3,"file":"main.js","mappings":"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","sources":["webpack://js-project/./src/index.js"],"sourcesContent":["let tikerArr = [];\nlet purchasePrices = {};\nlet quanties = {};\nlet myChart;\nlet colorIndex = 0;\nconst colors = ['#45ffbc', '#e3ffa8', '#a6a6a6', '#f6cd61','#aec993'];\n\nasync function apiFetch(symbol) {\n  const url = `https://financialmodelingprep.com/api/v3/quote/${symbol}?apikey=`;\n\n  const storedData = localStorage.getItem(`${symbol}`);\n  if (storedData) {\n    return JSON.parse(storedData);\n  }\n\n  try {\n    const response = await fetch(url);\n    const result = await response.json();\n    localStorage.setItem(`${symbol}`, JSON.stringify(result));\n    return result;    \n  } catch(error) {\n    console.error(error);\n    return null;\n  }\n}\n\nasync function apiInput(symbol, purchasePrice, quantity) {\n  const data = await apiFetch(symbol); \n  if (data.length > 0) {\n    purchasePrices[symbol] = purchasePrice;\n    quanties[symbol] = quantity;\n    localStorage.setItem('purchasePrices', JSON.stringify(purchasePrices));\n    localStorage.setItem('quantities', JSON.stringify(quanties))\n\n    return parseFloat(data[0].price);\n  } \n}\nconst contentDiv = document.getElementById('content');\nconst tileDiv = document.getElementById('stockTiles');\n\nfunction displayData(data) { \n  // console.log('display is passed with', data);\n  const stock = data[0];\n  const symbol = document.createElement('span'); \n  const tile = document.createElement('div');\n  // tile.style.border = '1px solid';\n  tile.style.margin = '5px';\n  tile.style.padding ='1px';\n  tile.style.borderRadius = '8px';\n  tile.style.width = '150px';\n  tile.style.backgroundColor = colors[colorIndex % colors.length];\n  colorIndex++;\n  const info = document.createElement('span');\n\n  // conditional format\n  const percentChg = function (percent) {\n    if (percent > 0) {\n      return `⬆${percent.toFixed(2)}%`\n    } else {\n      return `⬇${percent.toFixed(2)}%`\n    }\n  }\n   \n  const purchasePrice = purchasePrices[stock['symbol']];\n  const quantity = quanties[stock['symbol']];\n  const gainLoss =  (stock['price'] - purchasePrice) * quantity;\n  const roi = (stock['price']/purchasePrice - 1) * 100;\n  \n  // Create separate elements for each piece of info\n  const symbolP = document.createElement('p');\n  symbolP.id = \"symbolInfo\";\n  symbolP.style.fontWeight = \"600\";\n  symbolP.textContent = `${stock['symbol']}`;\n  \n  const priceP = document.createElement('p');\n  priceP.id = \"priceInfo\";\n  priceP.style.fontStyle = \"oblique\";\n  priceP.textContent = `$${stock['price'].toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;\n  \n  const percentChgP = document.createElement('p');\n  percentChgP.id = \"changeInfo\";\n  percentChgP.style.fontStyle = \"oblique\";\n  percentChgP.textContent = `${percentChg(stock['changesPercentage'])}`;\n  \n  if (stock['changesPercentage'] < 0) {\n    priceP.style.color = \"red\";\n    percentChgP.style.color = 'red';\n  } \n  \n  const gainLossP = document.createElement('p');\n  gainLossP.id = \"gainLossInfo\";\n  gainLossP.textContent = `$${gainLoss.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;\n  \n  const roiP = document.createElement('p');\n  roiP.id = \"roiInfo\";\n  roiP.textContent = `${percentChg(roi)}`;\n  if (roi < 0) {\n    gainLossP.style.color = \"red\";\n    roiP.style.color = 'red';\n  } \n  \n  //delete button\n  const deleteTile = document.createElement('button');\n  deleteTile.textContent = '-';\n  deleteTile.addEventListener('click', function() {\n  const index = tikerArr.indexOf(stock['symbol']);\n    if (index !== -1) {\n      tikerArr.splice(index, 1);\n      delete purchasePrices[stock['symbol']];\n      delete quanties[stock['symbol']];\n    }\n    tileDiv.removeChild(tile);\n    buildChart();\n    updateTotalGainLossAndROI();\n    \n    \n  });\n  // append \n  tile.appendChild(deleteTile);\n  tile.appendChild(info);\n  tile.appendChild(symbolP);\n  tile.appendChild(priceP);\n  tile.appendChild(percentChgP);\n  tile.appendChild(gainLossP);\n  tile.appendChild(roiP);\n  tileDiv.appendChild(tile);\n\n  return stock['price'];\n}\n\nasync function updateTotalGainLossAndROI() {\n  // Calculate total gain/loss and ROI\n  let totalGainLoss = 0;\n  let totalWorth = 0;\n  let totalInvestment = 0;\n  let totalCurrentValue = 0;\n  for (const symbol of Object.keys(purchasePrices)) {\n    const data = await apiFetch(symbol);\n    if (data && data.length > 0) {\n      const currentPrice = data[0].price;\n      totalWorth += currentPrice * quanties[symbol];\n      totalGainLoss += (currentPrice - purchasePrices[symbol]) * quanties[symbol];\n      totalInvestment += quanties[symbol] * purchasePrices[symbol];\n      totalCurrentValue += quanties[symbol] * currentPrice;\n    } \n  }\n  // console.log ('totalGainLoss', totalGainLoss) // gets back value\n\n  // Calculate ROI\n  const totalROI = ((totalCurrentValue / totalInvestment) - 1) * 100;\n  console.log('totalROI',totalROI)\n\n  // summary tile\n  const summaryTile = document.getElementById('summaryTile');\n  summaryTile.innerHTML = \"\";\n  // console.log(summaryTile);\n  // summaryTile.textContent = `Total Gain/Loss: $${totalGainLoss.toFixed(2)} Total ROI: ${totalROI.toFixed(2)}%`;\n \n  const summaryTotal = document.createElement('p');\n  summaryTotal.id = \"summaryTotal\";\n  summaryTotal.style.fontWeight = \"800\";\n  summaryTotal.style.padding = \"1px\";\n  summaryTotal.style.fontSize = \"20px\"\n  summaryTotal.textContent = `$${totalWorth.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;\n  \n  const summaryGl = document.createElement('p');\n  summaryGl.id = \"summaryGL\";\n  // summaryGl.style.fontWeight = \"800\";\n  summaryGl.innerHTML = `Gain/Loss<sup>*</sup>:     $${totalGainLoss.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;\n  \n  const summaryROI = document.createElement('p');\n  summaryROI.id = \"summaryROI\";\n  summaryROI.style.marginTop = '5px';\n  summaryROI.textContent = `${totalROI.toFixed(2)}%`;\n  if (totalROI < 0) {\n    summaryGl.style.color = \"red\";\n    summaryROI.style.color = 'red';\n  } \n\n  const footer = document.createElement('p');\n  footer.id = 'footer';\n  footer.style.fontSize = '10px';\n  footer.style.fontStyle = 'italic';\n  footer.innerHTML = \"<sup>*</sup> not include tax and related fees\"\n  \n  \n  \n  \n  summaryTile.appendChild(summaryTotal);\n  summaryTile.appendChild(summaryGl);\n  summaryTile.appendChild(summaryROI);\n  summaryTile.appendChild(footer.cloneNode(true));\n\n}\n\n\nasync function onSubmitForm() {\n  const ticker = document.getElementById('ticker').value;\n  const purchasePrice = parseFloat(document.getElementById('purchasePrice').value);\n  const quantity = parseFloat(document.getElementById('quantity').value);\n  \n  if (tikerArr.includes(ticker)) {\n    console.log('This ticker is already added'); \n    return;\n  }\n  \n  document.getElementById('estimatorForm').style.backgroundColor = '#e3ffa8';\n  const currentPrice = await apiInput(ticker, purchasePrice, quantity);\n  if (currentPrice && ticker.trim() !=='') {\n    const gainLoss =  (currentPrice - purchasePrice) * quantity;\n    const roi = (currentPrice/purchasePrice -1).toFixed(2)*100;\n\n    \n\n    tikerArr.push(ticker)\n    await printTile();  // Display the tile\n    await updateTotalGainLossAndROI();\n\n  } else {\n    console.log('failed to fetch current price');\n  }  \n}\n\nfunction printTile () {    // render all tiles\n    document.getElementById('stockTiles').innerHTML = \"\";\n    while (tileDiv.firstChild ) {\n      tileDiv.removeChild(tileDiv.firstChild)\n    }\n    tikerArr?.forEach ((ticker) => {\n      let tickerData = JSON.parse(localStorage.getItem(ticker));\n      displayData(tickerData);\n    });\n    buildChart();\n}\n\nasync function buildChart() {\n  if(myChart) {\n    myChart.destroy();\n  }\n\n  let tickers = tikerArr;\n  let gainLosses = [];\n  let labels = [];\n  const purchasePrices = JSON.parse(localStorage.getItem('purchasePrices'));\n  const quanties = JSON.parse(localStorage.getItem('quantities'));\n\n  for (let i = 0; i < tickers.length; i++) {\n    let tickerData = JSON.parse(localStorage.getItem(tickers[i]));\n    if (tickerData && tickerData.length > 0) {\n      let currentPrice = tickerData[0].price;\n      let purchasePrice = purchasePrices[tickers[i]];\n      let quantity = quanties[tickers[i]];\n      let gainLoss = (currentPrice - purchasePrice) * quantity;\n      labels.push(tickerData[0].symbol);\n      gainLosses.push(gainLoss);\n    }\n  }\n\n  const ctx = document.getElementById('myChart').getContext('2d');\n\n\n  myChart = new Chart(ctx, {\n    type: 'bar', \n    data: {\n      labels: labels,\n      datasets: [{\n        label: 'Gain/Loss in USD',\n        data: gainLosses,\n        barPercentage: 2,\n        // barThickness: 6,\n        maxBarThickness:20,\n        minBarThickness:10,\n        backgroundColor: 'rgba(180,255,228,1)',\n        borderColor:'rgba(75,192,192,1)',\n        borderWidth: 1\n      }]\n    },\n    options: {\n      responsive: false,\n      maintainAspectRatio: false,\n      scales: {\n        y: {\n          beginAtZero: true,\n        },\n        x: {\n          grid: {\n            offset: true\n          }\n        }\n      }\n    },\n    // backgroundColor:'black'\n  });\n}\n\n\nprintTile();\n"],"names":["myChart","tikerArr","purchasePrices","quanties","colorIndex","colors","async","apiFetch","symbol","url","storedData","localStorage","getItem","JSON","parse","response","fetch","result","json","setItem","stringify","error","console","document","getElementById","tileDiv","buildChart","destroy","tickers","gainLosses","labels","i","length","tickerData","gainLoss","price","push","ctx","getContext","Chart","type","data","datasets","label","barPercentage","maxBarThickness","minBarThickness","backgroundColor","borderColor","borderWidth","options","responsive","maintainAspectRatio","scales","y","beginAtZero","x","grid","offset","innerHTML","firstChild","removeChild","forEach","ticker","stock","tile","createElement","style","margin","padding","borderRadius","width","info","percentChg","percent","toFixed","purchasePrice","quantity","roi","symbolP","id","fontWeight","textContent","priceP","fontStyle","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","percentChgP","color","gainLossP","roiP","deleteTile","addEventListener","index","indexOf","splice","totalGainLoss","totalWorth","totalInvestment","totalCurrentValue","Object","keys","currentPrice","totalROI","log","summaryTile","summaryTotal","fontSize","summaryGl","summaryROI","marginTop","footer","appendChild","cloneNode","updateTotalGainLossAndROI","displayData","printTile"],"sourceRoot":""}

